define("pub",["./lib/boot","./lib/app","gallery/jquery/1.8.3/jquery","./lib/util","./lib/exports","./lib/view","./lib/handler","./lib/router"],function(a,b,c){return a("./lib/boot"),console.log("[PubJS] Boot!"),c.exports=b=a("./lib/exports")}),define("lib/app",["gallery/jquery/1.8.3/jquery","./util"],function(a,b){function c(){}function d(a,b,c,d,e){if(!(d&&d in b))return void 0;if(d=b[d],"function"!=typeof d)return d;var f=a.callee.caller.arguments;return 2==a.length?d.apply(c,f):e instanceof Array&&e.length?d.apply(c,e):d.call(c)}function e(a,b,c){return d(arguments,this.prototype,a,b,c)}function f(a,b){for(var c=[],e=2;e<arguments.length;e++)c.push(arguments[e]);return d(arguments,this.p,a,b,c)}function g(a,g,h,i){function j(a,b,e){if(0===a)return this;if(0===arguments.length)return g==c?null:g;var f=arguments.callee.caller.arguments;return b?d(arguments,g.prototype,a,b,e):g.call(a,e||f[0],f[1],f[2])}j.prototype=g.prototype;var k=0,l=a.prototype,m=a.prototype=new j(0);for(k in l)l.hasOwnProperty(k)&&(m[k]=l[k]);if("object"==typeof h)for(k in h)h.hasOwnProperty(k)&&(m[k]=h[k]);return m.constructor=a,a.master=j,a.self=f,a.mine=e,a.p=i,a.version=b.version,h=null,a}function h(a){if(a instanceof Object){var b=a._&&a._.guid||0;return b&&t[b]===a}return!1}function i(a){return a&&a.master?a.self!==f?!1:a.mine!==e?!1:a.version!==b.version?!1:!0:!1}function j(a,b){a instanceof Object&&(b=a,a=null);var c,d=void 0!==b,e=null===b;if(a){var f=a.split("/");for(c=j.data;f.length>1&&c instanceof Object&&c.hasOwnProperty(f[0]);)c=c[f.shift()];if(f.length>1)return d?!1:e?!0:void 0;a=f[0]}else{if(e)return!1;c=j,a="data"}return d?(c[a]=b,!0):e?(c[a]=null,delete c[a],!0):c[a]}function k(a){var b=a.data,c=t[b[0]]||null;if(c){var d=b[1];if(v(d)||(d=c[d],v(d)))return a.data=b[2],b=d.call(c,a,this),c=d=null,b}}function l(){return this}function m(c,d,e,f){var g=null,i=c.lastIndexOf(".");if(-1!==i&&(g=c.substr(i+1),c=c.substr(0,i)),(v(d)||h(d))&&(f=e,e=d,d=null),h(e)){var j=e[f];v(j)&&(f=e,e=j,j=null)}a.async(c,function(a){g&&(a=a[g]),a?v(e)&&e.call(f||window,a,d):b.error("loadModule Error! - "+c+(g?"."+g:"")),a=g=i=c=d=e=f=null})}function n(){function a(a,c){b.usingMiddlewares.push({route:a,handler:c})}for(var c=0,d=arguments.length;d>c;c++)switch(typeof arguments[c]){case"string":var e=arguments[c];c++;var f=arguments[c];a(e,f);break;case"function":a("/",arguments[c])}}function o(a,c){function d(){f++;var h=g[f];if(h){var i=new RegExp(h.route);i.test(a)?h.handler(b,d,function(){e(f,h),f--,d()}):d()}else c()}function e(a,b){var c=g.slice(0,a);c.push(g[a+1],b);var d=g.slice(a+2);[].push.apply(c,d),g=c}var f=-1,g=b.usingMiddlewares;d()}function p(b){return function(c,d,e){a.async(c.config("middlewares_base")+b+".js",function(a){return a().call(null,c,d,e)})}}var q=a("gallery/jquery/1.8.3/jquery.js"),r=a("./util");b.version="0.1.2",b.noop=c,b.extend=g;var s=window.console||{};b.log=function(){s.log&&j("debug")>0&&(s.log.apply?s.log.apply(s,arguments):s.log(arguments[0]))},b.error=function(){s.error&&j("debug")>1&&(s.error.apply?s.error.apply(s,arguments):s.error(arguments[0]))};var t=b.caches={id:10,length:0};b.util=r;var u=r.isString,v=r.isFunc;r.has,r.isModule=h,r.isCreator=i,j.data={},b.config=j,b.config("middlewares_base","./middlewares/");var w=null,x="childs",y="childs_name",z="childs_id";g(l,c,{isNull:function(){return!1},create:function(a,c,d){if(!h(this))return b.error("Current Module Invalid"),!1;if(this._.hasOwnProperty(x)||(this._[x]=[],this._[y]=this.$={},this._[z]=0),v(a)&&(v(c)?a=a(this._):(d=c,c=a,a=null)),a){if(this._[y][a])return b.error("Module Name Exists"),!1}else a="child_"+this._[z];this._[z]++;var e={uri:this._.uri+"/"+a,name:a,pid:this._.guid,guid:t.id++},f=new c(d,this,e);return f._=e,t[e.guid]=f,t.length++,this._[x].push(f),this._[y][a]=f,b.config("debug")>1&&b.log("[PubJS] A new module "+a+" created."),v(f.init)&&f.init(d),f},parent:function(){return h(this)&&0!==this._.pid?t[this._.pid]||null:null},child:function(a){return h(this)&&this._[x]?isNaN(a)?this._[y][a]||null:(a=parseInt(a,10),0>a||a>=this._[x].length?null:this._[x][a]):null},childs:function(a){return h(this)&&this._[x]?a?this._[y]:this._[x]:a?null:[]},get:function(a){if(!u(a))return null;if(!a)return this;if("/"==a.charAt(0))return b.core.get(a);for(var c,d=this,e=a.split("/");e.length;)if(c=e.shift(),d=".."==c?d.parent():d.child(c),!d)return d;return d},gets:function(a){var c,d=arguments[1]||[];if(1!==arguments[2]&&!u(a))return d;if(!a)return d.push(this),d;if(!isNaN(a))return c=this.child(a),c&&d.push(c),d;if("/"==a.charAt(0))return b.core.gets(a);var e=a.indexOf("/");if(-1==e?(c=a,a=null):(c=a.substr(0,e),a=a.substr(e+1)),-1!=c.indexOf("*")){var f=h(this)&&this._[y];if(!f)return d;var g=r.starRegExp(c);for(c in f)f.hasOwnProperty(c)&&g.test(c)&&(e=f[c],a?e.gets(a,d,1):d.push(e))}else e=".."==c?this.parent():this.child(c),e&&(a?e.gets(a,d,1):d.push(e));return d},fire:function(a,b,c,d){return b instanceof Function&&(d=c,c=b,b=null),w.fire(this,a,b,c,d)},cast:function(a,b,c,d){return b instanceof Function&&(d=c,c=b,b=null),w.broadcast(this,a,b,c,d)},send:function(a,b,c){var d=h(a)?[a]:this.get(a);return w.send(this,d,b,c)},bind:function(){var a,c=arguments,d=c.length,e=new Array(5),f=1;e[0]=c[0];for(var g=1;d>g;g++){switch(a=c[g],f){case 1:if(h(a)){f=2;break}case 2:v(a)&&(f=3);break;case 3:if(u(a)){a=e[2]&&e[2][a];break}case 4:r.isObject(a)||(f=0)}if(e[f++]=a,1>f||f>4)break}return f?w.bind(e[2],this,e[0],e[3],e[1],e[4]):(b.error("bind param error!",c),!1)},unbind:function(a,b){return w.unbind(null,this,a,b)},listen:function(a,c,d,e,f){if(v(d))f=e,e=d,d=null;else if(u(e)&&(e=this[e],!e||!v(e)))return b.error("listen callback invalid"),!1;for(var g=h(a)?[a]:this.gets(a),i=0;g.length;)i+=w.bind(this,g.shift(),c,e,d,f)?1:0;return i},unlisten:function(a,b,c){var d=!a||h(a)?[a]:this.gets(a);u(c)&&(c=this[c]);for(var e=0;d.length;)e+=w.unbind(this,d.shift(),b,c);return e},jq:function(a,b,c,d){return a?(a.jquery||(a=q(a)),(v(c)||3==arguments.length)&&(d=c,c=null),a.bind(b,[this._.guid,d,c],k),this):this},dg:function(a,b,c,d,e){return a?(a.jquery||(a=q(a)),(v(d)||4==arguments.length)&&(e=d,d=null),a.delegate(b,c,[this._.guid,e,d],k),this):this},destroy:function(a){if(this.beforeDestroy)try{this.beforeDestroy()}catch(c){b.error("beforeDestroy() Exception!",c)}a||this.fire("destroy");for(var d=this.childs(),e=0;e<d.length;e++)d[e].destroy&&d[e].destroy(-1);if(this.unbind(),this.unlisten(),this.afterDestroy)try{this.afterDestroy()}catch(c){b.error("afterDestroy() Exception!",c)}if(-1!==a){var f=this.parent();f&&f.removeChild(this)}var g=this._&&this._.guid||0;t.hasOwnProperty(g)&&(delete t[g],t.length--)},removeChild:function(a){var b,c,d=0,e=this._[y],f=this._[x];if(h(a))c=a._.guid;else if(isNaN(a))b=""+a,e.hasOwnProperty(b)&&(c=e[b]._.guid);else{if(d=parseInt(a,10),0>d||d>=f.length)return null;c=f[d]._.guid}if(!c)return null;for(;d<f.length;d++)if(f[d]._.guid==c)return a=f[d],delete this._[y][a._.name],f.splice(d,1),a;return null},getData:function(a){return this.getChildData(a)},getChildData:function(a){var b=this._[x];if(b){for(var c,d,e=a?[]:{},f=1,g=0;g<b.length;g++)c=a?g:b[g]._.name,d=b[g].getData(a),void 0!==d&&(e[c]=d,f=0);return f?void 0:e}},reset:function(){var a=this._[x];if(a)for(var b=0;b<a.length;b++)a[b].reset()}}),l.extend=function(a,c,d){var e=function(){return!1},f=arguments.length>3;f&&(e=arguments[1],c=arguments[2],d=arguments[3]);var g=function(b){this.config={},q.extend(!0,this.config,a,b);var c=e.apply(this,arguments)||!0;return c?(g.master(this,null,this.config),void 0):!1};return b.extend(g,c,d),g},b.Module=l;var A=l.extend({},function(){this._={uri:"",name:"APP",parent:0,guid:1},t["1"]=this,t.length++},l,{get:function(a){return a=a.replace(/^[\/]+/,""),A.master(this,"get",[a])},gets:function(a){return a=a.replace(/^[\/]+/,""),A.master(this,"gets",[a])},destroy:function(){}});b.init=function(a,c){if(a instanceof Object&&r.merge(j.data,a),b.config("init")){var d=b.config("init");d.call(b,b)}return b.core=new A,b.config("debug")>0&&b.log("[PubJS] PubJS is in debuging environment! Debug Level "+b.config("debug")),c()},b.navigate=function(a){u(a)?window.location.hash="#"+a:window.history.go(a)},b.loadModule=m,b.usingMiddlewares=[],b.use=n,b._runMiddlewares=o;for(var B=["cookieParser","datacenter","drag","language","messager","query"],C=0,D=B.length;D>C;C++)b[B[C]]=function(a){return function(){return p(a)}}(B[C])}),define("lib/boot",["./app","gallery/jquery/1.8.3/jquery","./util"],function(a,b){function c(b){g.handler=b||f.config("router/default_handler")||"default",a.async((f.config("handlers_base")||"../handlers/")+g.handler,d)}function d(a){if(!g.handler)return!1;if(a)if(a.name!=g.handler)f.error("handler is invalid - "+g.handler+":router()");else{var c={name:g.handler};g.current=[g.handler],a.router&&f.util.isFunc(a.router)?f._runMiddlewares(window.location.href,function(){f.config("debug")>0&&f.log("[PubJS] Running handler "+g.handler),a.beforeRun&&f.util.isFunc(a.beforeRun)&&a.beforeRun(b,c,f),a.router(f),a.afterRun&&f.util.isFunc(a.afterRun)&&a.afterRun(b,c,f)}):f.error("Router is invalid - "+g.handler+":router()"),g.handler==c.handler&&(g.handler=null)}else f.error("handler is missing - "+g.handler+":router()")}function e(){if(-1!==i){i=window.location.href;var a=window.location.pathname.substr(1),b=a.split("/"),d=b.shift();c(d)}}var f=a("./app"),g=b.env={login:null,handler:null,current:null,wait_template:!1};b.run=c,b.reload=function(a){g.current&&c.apply(b,g.current),a||f.core.cast("reload")};var h=null;b.switchPage=function(a){if(a!=h){var b,c=h;return h&&(b=f.core.get(h),b&&b.hide()),h=a,b=f.core.get(a),b&&b.show(),c}};var i=-1;"onhashchange"in window&&(void 0===document.documentumentMode||8==document.documentumentMode)?window.addEventListener?window.addEventListener("hashchange",e,!1):window.attachEvent?window.attachEvent("onhashchange",e):window.onhashchange=e:setInterval(function(){i!=window.location.href&&e.call(window)},150),a.async("pub-config",function(a){a=a||{},f.init(a,function(){i=window.location.href,e(),window.app=f,f.config("debug")>1&&f.log("[PubJS] Environment inited.")})})}),define("lib/exports",["./app","gallery/jquery/1.8.3/jquery","./util","./view","./handler","./router"],function(a,b,c){var d=a("./app"),e=a("./view"),f=a("./util"),g=a("./handler");return c.exports=b={App:d,View:e,Module:d.Module,Util:f,Handler:g}}),define("lib/handler",["./router"],function(a,b){var c=a("./router");b.setup=function(a,b,d){arguments.length<2&&(d=b,"undefined"!=typeof d.name&&(b=d.name)),"undefined"==typeof d.routes&&(d.routes={}),a.name=b,a.router=c(d.routes)}}),define("lib/router",[],function(a,b,c){function d(a){return/^#/.test(a)}function e(a){function b(b,c){for(var d in c.rules)if(c.rules[d].test(b)){var e=f(d,c.rules[d],b);return{handler:a[d],params:e}}return{handler:g,params:{}}}var c=function(a){var d=window.location.pathname+window.location.hash,e=b(d,c);a.currHandler=e.handler,a.params=e.params,e.handler(a)};c.handlers=a,c.rules={};for(var e in a)c.rules[e]=d(e)?new RegExp(e.replace(/:([\w%$.-]*)/g,"([\\w%$.-]*)").replace("(([\\w%$.-]*))","([\\w%$.-]*)")+"$","i"):new RegExp("^"+e.replace(/:([\w%$.-]*)/g,"([\\w%$.-]*)").replace("(([\\w%$.-]*))","([\\w%$.-]*)")+"([#]*)(.*)$","i");return c}function f(a,b,c){for(var d=[];/:([\w%$-]+)/g.test(a);)a=a.replace(/:([\w%$-]*)/i,":([w%$-]+)"),d.push(RegExp.$1),a=a.replace(/\/:\(\.\*\)/i,"\\/(.*)").replace(/\(:\(\.\*\)\)/i,"(.*)");b.test(c);for(var e={},f=0;10>f&&""!==RegExp["$"+f];f++)e[d[f-1]]=RegExp["$"+f];return e}function g(){return!1}c.exports=e}),define("lib/util",["gallery/jquery/1.8.3/jquery"],function(a,b){function c(a){return a instanceof Function}function d(a){return"string"==typeof a}function e(a){return a instanceof Array}function f(a){return a instanceof Object}function g(a){return"undefined"==typeof a}function h(a){return a=a.replace(/([\$\.\^\(\)\[\]\{\}])/g,"\\$1"),a=a.replace(/\*/g,"(?:.+)"),new RegExp(a)}function i(a,b){var c=r(a).css(b).replace(/[a-z]+/i,"");return parseInt(c,10)||0}function j(a){if(d(a)){var b=a.charAt(0).toUpperCase();return b+a.substr(1)}return a}function k(a,b){var c="0123456789ABCDEF",d="";for(a=parseInt(a,10);a>15;)d=c.charAt(a%16)+d,a>>=4;for(d=c.charAt(a%16)+d;b&&d.length<b;)d="0"+d;return d}function l(a,b){return void 0===b?!1:s.call(a,b)}function m(a,b,c){var d="#";return d+=k(255*a,2),d+=k(255*b,2),d+=k(255*c,2)}function n(a,b,c){var d,g,h,i=arguments.length>=3;if(e(a)){for(g=a.length,h=0;g>h;h++)if(d=a[h],i){if(d&&d[c]===b)return h}else if(d===b)return h}else if(f(a))for(h in a)if(s.call(a,h))if(d=a[h],i){if(d&&d[c]===b)return h}else if(d===b)return h;return null}function o(a){return x[a]}function p(a,b){for(a=a.toString();a.length<b;)a="0"+a;return a}function q(a){var b=z;switch(a){case"Y":return b.getFullYear();case"y":return b.getFullYear()%100;case"m":return p(b.getMonth()+1,2);case"n":return b.getMonth()+1;case"d":return p(b.getDate(),2);case"j":return b.getDate();case"N":return b.getDay();case"w":return b.getDay()%7;case"a":return b.getHours()<12?"am":"pm";case"A":return b.getHours()<12?"AM":"PM";case"g":return b.getHours()%12+1;case"h":return p(b.getHours()%12+1,2);case"G":return b.getHours();case"H":return p(b.getHours(),2);case"i":return p(b.getMinutes(),2);case"s":return p(b.getSeconds(),2)}return a}var r=a("gallery/jquery/1.8.3/jquery.js"),s=Object.prototype.hasOwnProperty;b.isFunc=c,b.isString=d,b.isArray=e,b.isObject=f,b.isUndefined=g,b.starRegExp=h,b.getCssValue=i,b.ucFirst=j,b.toHex=k,b.has=l;var t=navigator.userAgent.toLowerCase(),u=null;b.isIe=(u=t.match(/msie ([\d.]+)/))?u[1]:!1,b.isFf=(u=t.match(/firefox\/([\d.]+)/))?u[1]:!1,b.isChrome=(u=t.match(/chrome\/([\d.]+)/))?u[1]:!1,b.isOpera=(u=t.match(/opera.([\d.]+)/))?u[1]:!1,b.isSafari=(u=t.match(/version\/([\d.]+).*safari/))?u[1]:!1,t=u=null;var v=String.prototype.trim;if(!v){var w=/(^\s*)|(\s*$)/g;v=function(){return this.replace(w,"")}}b.trim=function(a){return d(a)?v.call(a):a},b.own=function(a,b){return l(a,b)?a[b]:void 0},b.hsl2rgb=function(a,b,c){f(a)&&"h"in a&&"s"in a&&"l"in a&&(c=a.l,b=a.s,a=a.h);var d,e,g,h,i;return a=a%360/60,i=2*b*(.5>c?c:1-c),h=i*(1-Math.abs(a%2-1)),d=e=g=c-i/2,a=~~a,d+=[i,h,0,0,h,i][a],e+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],m(d,e,g)},b.hsb2rgb=function(a,b,c){f(a)&&"h"in a&&"s"in a&&"b"in a&&(c=a.b,b=a.s,a=a.h);var d,e,g,h,i;return a=a%360/60,i=c*b,h=i*(1-Math.abs(a%2-1)),d=e=g=c-i,a=~~a,d+=[i,h,0,0,h,i][a],e+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],m(d,e,g)},b.blockEvent=function(a){return a.stopPropagation(),!1},b.stopEvent=function(a){return a.stopPropagation(),!0},b.each=function(a,d,g){if(!a||!c(d))return!1;g||(g=window);var h=null,i=null,j=null;if(e(a)){for(j=0;j<a.length&&(h=d.call(g,a[j],j),h!==!1);j++)null===h?(a.splice(j,1),j--):void 0!==h&&(a[j]=h);j==a.length&&(j=null)}else if(f(a))for(i in a)if(s.call(a,i)){if(h=d.call(g,a[i],i),h===!1){j=i;break}null===h?(a[i]=null,delete a[i]):void 0!==h&&(a[i]=h)}return a=d=g=null,b.each.result=j,j},b.uniq=b.unique=function(a,b){if(!e(a))return null;for(var c={},d=0;d<a.length;d++)s.call(c,a[d])?b||a.splice(d--,1):c[a[d]]=1},b.index=n,b.find=function(a){var b=n.apply(this,arguments);return null!==b?a[b]:null},b.remove=function(a){var b=n.apply(this,arguments);return null===b?!1:(e(a)?a.splice(b,1):delete a[b],!0)},b.getViewport=function(){var a=document,b=a.documentElement,c=a.body,d="CSS1Compat"===a.compatMode;return{width:d?b.clientWidth:c.clientWidth,height:d?b.clientHeight:c.clientHeight}},b.merge=function(a,c){return b.each(c,function(b,c){null===b||void 0===b?a&&delete a[c]:(a||(a={}),a[c]=b)}),a},b.first=function(a){var b;if(e(a))b=a.shift();else if(f(a))for(var c in a)if(l(a,c)){b=a[c];break}return b};var x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},y=/[&<>"]/g;b.html=function(a){return"string"!=typeof a?a:a.replace(y,o)},b.fix0=p;var z=null,A=/[YymndjNwaAghGHis]/g;b.date=function(a,b,c){if(!a)return"";var d;return isNaN(b)?b instanceof Date?(d=b,isNaN(c)||d.setTime(d.getTime()+1e3*c)):d=new Date:b>5e8?d=(new Date).setTime(1e3*b):(d=new Date,d.setTime(d.getTime()+1e3*b)),z=d,a.replace(A,q)}}),define("lib/view",["./app","gallery/jquery/1.8.3/jquery","./util"],function(a,b){function c(a){return"<{tag}{class}{id}{type}{value}{attr-data}>{html}</{tag}>".replace(/(\{\w+\})/g,function(b){return b=b.replace(/\{|\}/g,""),("tag"===b||"html"===b)&&a[b]||a[b]&&" "+b+'="'+a[b]+'"'||""})}function d(a){var b=c(a),d="",e=0;for(var f in a)/data-\w+/.exec(f)&&(d+=" "+f+'="'+a[f]+'"',e=e||!e);return b=b.replace("{attr-data}",d),"input"===a.tag&&(b=b.replace("></input>","/>")),a.stringify||(b=l(b)),d=e=null,b}function e(a,b){var c=!1;if(j.util.isArray(b)){for(var d=0;d<b.length;d++)if(a.closest(b[d]).length){c=!0;break}}else c=a.closest(b).length;return c}function f(a,b,c){var d=function(f){e(l(f.target),a)||(b.call(c||this),l(document).unbind("click",d))};return l(document).bind("click",d),d}function g(a,b,c){var d=[],e=null,f=a[1]>1,g=a[0]>1,i=null;g&&(e=[]);for(var j=0,l=a[0];l>j;j++)if(g?(i=h(b,c.row+"_"+j,b.config.target,b.config.cellSet&&b.config.cellSet[d.length]||{}),e.push(i)):i={el:b.config.target},f)for(var m=0,l=a[1];l>m;m++)d.push(h(b,g&&c.cell+"_"+k+"_"+m||c.col+"_"+m,i.el,b.config.cellSet&&b.config.cellSet[d.length]||{}));else g&&d.push(i);return i=f=g=null,{rows:e,cells:d}}function h(a,b,c,d){return a.create(b,m,l.extend({"class":b,target:c},d))}function i(a,b){return 0>b&&Math.abs(b)<=a.length&&a.slice(a.length+b,a.length+(b+1))[0]||a[b]}var j=a("./app"),l=a("gallery/jquery/1.8.3/jquery.js"),m=j.Module.extend({html:"",auto:1,autoLayout:0,autoHide:0},function(a,b){l.extend(!0,this.config,{tag:a.tagName||"div",id:a.id||null,target:b},a),this.config.el?this.el=this.config.el:(this.el="body"===this.config.tag?l("body:first"):this.createDom(this.config),this.auotHideHandler=null,j.util.isString(this.config.target)&&(this.config.target=l(this.config.target)))},j.Module,{init:function(){this.config.auto&&this.render()},show:function(a){a=a||void 0,this.config.autoHide&&!a&&(a=0);var b=this,c=function(){if(b.afterShow(),b.config.autoHide){var a=[b.el];b.config.autoHide.andSelf&&(a=a.concat(b.config.autoHide.andSelf)),b.auotHideHandler=f(a,b.hide,b),a=null}b.cast("containerShow")};return this.el.show(a,c),void 0===a&&b.cast("containerShow"),this},hide:function(a){a=a||void 0,this.config.autoHide&&!a&&(a=0);var b=this,c=function(){b.afterHide(),b.config.autoHide&&(b.auotHideHandler=null),b.cast("containerHide")};return this.el.hide(a,c),void 0===a&&b.cast("containerHide"),this},afterHide:l.noop,afterShow:l.noop,appendTo:function(a){a.jquery?this.el.appendTo(a):a.el&&a.el.jquery&&this.el.appendTo(a.el)},createDom:function(a){return d(a)},render:function(){return this.el&&"body"!==this.config.tag&&this.appendTo(this.config.target),this},remove:function(a){return this.el.remove(),a&&(this.el=null),this},afterDestroy:function(){this.remove(!0)},destroy:function(){if(this.doms)for(var a in this.doms)this.doms.hasOwnProperty(a)&&this.doms[a]&&this.doms[a].jquery&&this.doms[a].remove();this.el&&(this.el.find("*").unbind(),this.el.empty()),m.master(this,"destroy")}});b.Container=m;var n=j.Module.extend({target:null,grid:[1,1],perfix:{row:"layoutRow",col:"layoutCol",cell:"layoutCell"},cellSet:null},function(a){return a.target?(this.gridCells=null,this.gridRows=null,this.cellsLen=0,this.hasBuilded=0,void 0):!1},j.Module,{init:function(){this.doLayout(),this.hasBuilded=1},get:function(a){return a=+a,isNaN(a)?void 0:i(this.gridCells,a)},getRow:function(a){return a=+a,isNaN(a)?void 0:i(this.gridRows,a)},doLayout:function(a){if(a&&(this.config=l.extend(this.config,a)),1===this.config.grid[0]&&1===this.config.grid[1])this.gridCells=this.gridRows=[this.config.target];else{var b=g(this.config.grid,this,this.config.perfix);this.gridCells=b.cells,this.gridRows=b.rows||[this.config.target],b=null}return this.cellsLen=this.gridCells.length,this},afterDestroy:function(){this.config.target.empty()}});n.isMaster=!0,b.layout=n;var o=j.Module.extend({},m,{init:function(){this.config.init.apply(this,arguments)}});b.Page=o;var p=j.Module.extend({tagName:"form",method:"POST",type:"multipart/form-data",action:"/"},m,{init:function(){this.render();var a=l(this.el);a.attr("action",this.config.action),a.attr("method",this.config.method.toUpperCase()),a.attr("type",this.config.type)},append:function(){},submit:function(){}});b.Form=p}),define("lib/middlewares/language",[],function(a,b,c){function d(a,b){function c(a){return a[1]>0&&void 0!==h[a[1]]?h[a[1]]:a[0]}function d(a,b){m=0,a||(f.translate=b),e(a)}function e(b){b||($("body").removeClass("i18n_"+f.name).addClass("i18n_"+f.load_name),$("#LANGUAGE_STYLE").remove(),f.translate&&$("head").append('<link type="text/css" rel="stylesheet" id="LANGUAGE_STYLE" href="'+a.config("language/style")+f.load_name+'/style.css">'),f.name=f.load_name),l&&(l(!b),l=null),a.core.cast("switchLanguage",f.name)}var f=this,g=/\%(\d+)/g,h=null,i=a.config("language/default")||"zh_CN",j=a.config("language/cookie")||"lang",k=a.cookie.get(j),l=b;this.load_name=this.name=k||i,this.translate=null,this.loaded=!0,b=null,k!=this.name&&a.cookie.set(j,this.name),this.LANG=function(a){return f.translate&&f.translate.hasOwnProperty(a)&&(a=f.translate[a]),arguments.length>1?(h=arguments,a.replace(g,c)):a},window._T=function(a){return a},this.set=function(b,c){return b?b==this.load_name&&c?c(!1):(this.load_name=b,a.cookie.set(j,b,{expires:9999,path:"/"}),l=c,this.load(),void 0):this.name};var m=0;this.load=function(){return this.load_name==i?(f.translate=null,e(null),void 0):(this.loaded=!1,m&&a.data.abort(m),m=a.data.get("/i18n/"+this.load_name+"/translate.json",d),void 0)},this.load()}c.exports=function(){return function(a,b,c){return a.cookie&&a.data?(a.lang=new d(a,b),void 0):c()}}}),define("lib/middlewares/query",[],function(a,b,c){function d(a){var b=a.split("&"),c={};if(""==b[0])return c;for(var d=0,f=b.length;f>d;d++){var g=b[d].split("=");c[g[0]]=e(g[1])}return c}function e(a){if(isNaN(parseInt(a))){var b=null;switch(a){case"true":b=!0;break;case"false":b=!1;break;case"null":b=null;break;case"undefined":b=void 0;break;case"NaN":b=0/0;break;default:b=a}return b}return parseFloat(a)}c.exports=function(){return function(a,b){var c=window.location.search;a.query=d(c.substring(1)),b()}}}),define("lib/middlewares/drag",["gallery/jquery/1.8.3/jquery"],function(a,b,c){function d(a,b,c,d){return a?(a.jquery||(a=f(a)),1==arguments.length?a.unbind("mousedown.drag",e):(isFunc(b)&&(d=c,c=b,b=null),a.bind("mousedown.drag",{cb:c,ct:d||window,data:b},e)),!1):!1}function e(a){var b=a.data;switch(a.type){case"mouseup":f(document).unbind("mouseup.drag",e),f(document).unbind("mousemove.drag",e),b.type="endDrag";case"mousemove":"mouseup"!=a.type&&(b.type="moveDrag"),b.cx=a.pageX,b.cy=a.pageY,b.dx=a.pageX-b.x,b.dy=a.pageY-b.y,b.cb.call(b.ct,b);break;case"mousedown":if(2==a.button)return!1;b.cx=b.x=a.pageX,b.cy=b.y=a.pageY,b.dx=0,b.dy=0,b.type="startDrag",b.cb.call(b.ct,b)&&(f(document).bind("mouseup.drag",b,e),f(document).bind("mousemove.drag",b,e))}return!1}var f=a("gallery/jquery/1.8.3/jquery.js");c.exports=function(){return function(a,b){a.drag=d,b()}}});